<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mapa Inteligente â€“ Mock</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f2f4f6; margin:0; padding:12px; }
    .topbar{ display:flex; align-items:center; gap:10px; margin-bottom:12px; }
    .topbar h2{ flex:1; text-align:center; margin:0; }
    .card { background:#fff; border-radius:12px; padding:12px; margin-bottom:12px; box-shadow:0 2px 6px rgba(0,0,0,0.08); }
    label { font-weight:bold; font-size:14px; margin-top:8px; display:block; }
    input { width:100%; padding:10px; border-radius:8px; border:1px solid #ccc; font-size:16px; margin-top:4px; }
    button {
      width:100%; margin-top:12px; padding:14px; font-size:16px;
      border:none; border-radius:10px; background:#2e7d32; color:#fff; font-weight:bold; cursor:pointer;
    }
    .modo { background:#455a64; }
    .row { display:flex; gap:8px; }
    .row > * { flex:1; }

    .produto { border-radius:14px; padding:14px; margin-bottom:10px; background:#e8f5e9; }
    .produto.prio { background:#ffebee; border:1px solid #ef9a9a; }
    .produto-header { display:flex; justify-content:space-between; align-items:flex-start; gap:10px; }
    .produto-titulo { font-weight:bold; font-size:15px; }
    .produto-sub { font-size:13px; margin-top:6px; color:#333; line-height:1.25; }

    .badge { font-size:12px; padding:4px 8px; border-radius:8px; color:#fff; white-space:nowrap; }
    .alta { background:#d32f2f; }
    .media { background:#f9a825; color:#111; }
    .baixa { background:#388e3c; }
    .chip { display:inline-block; font-size:12px; padding:4px 8px; border-radius:999px; background:#eceff1; color:#222; margin-right:6px; margin-top:6px; }
    .chip.prio { background:#ffcdd2; }
    .footer { font-size:12px; color:#666; text-align:center; margin-top:10px; }
  </style>
</head>

<body>
  <div class="topbar">
    <div style="width:40px;"></div>
    <h2>ğŸ“¦ Mapa Inteligente â€“ Mock</h2>
    <div style="width:40px;"></div>
  </div>

  <div class="card">
    <label>Buscar produto</label>
    <input id="busca" placeholder="Ex: banana, batata, tomate..." oninput="render()"/>

    <div class="row" style="margin-top:10px;">
      <button class="modo" onclick="toggleSoPrioridade()" id="btnPrioridade">â­ SÃ³ prioridade: OFF</button>
      <button class="modo" onclick="toggleOrdenacao()" id="btnOrdem">ğŸ”¤ Ordem: Aâ†’Z</button>
    </div>

    <div style="margin-top:10px;">
      <span class="chip prio">ğŸ”´ Prioridade alta</span>
      <span class="chip">ğŸŸ¡ Prioridade mÃ©dia</span>
      <span class="chip">ğŸŸ¢ Prioridade baixa</span>
    </div>
  </div>

  <div id="lista"></div>

  <div class="footer">Mock estÃ¡tico (sÃ³ pra visualizar a ideia). Depois plugamos nos dados reais.</div>

<script>
  // âœ… Exemplo de dados (simulando seu â€œmapaâ€)
  // prioridade: "alta" | "media" | "baixa"
  const dados = [
    { cod: 6656, nome: "BATATA INGLESA MEDIA SC 25 KG", total: 340, prioridade:"alta", setor:"PASSAÃ‡ÃƒO" },
    { cod: 2614, nome: "BANANA CATURRA VERDE CX 15 KG", total: 210, prioridade:"alta", setor:"FRUTAS" },
    { cod: 303,  nome: "TOMATE ITALIANO EXTRA CX 19 KG", total: 190, prioridade:"alta", setor:"PASSAÃ‡ÃƒO" },
    { cod: 843,  nome: "LIMAO TAITI MEDIO CX 20 KG", total: 140, prioridade:"alta", setor:"FRUTAS" },
    { cod: 238,  nome: "BANANA PRATA MEDIA VERDE CX 15 KG", total: 95, prioridade:"media", setor:"FRUTAS" },
    { cod: 50,   nome: "REPOLHO ROXO CX 19 KG", total: 70, prioridade:"media", setor:"PASSAÃ‡ÃƒO" },
    { cod: 452,  nome: "ALFACE AMERICANA 1 UN", total: 55, prioridade:"media", setor:"FRUTAS" },
    { cod: 1520, nome: "ABOBRINHA MENINA 400 GR 1 BD", total: 42, prioridade:"baixa", setor:"PASSAÃ‡ÃƒO" },
    { cod: 102,  nome: "MORANGO 250 GR CX 4 BD", total: 24, prioridade:"baixa", setor:"FRUTAS" },
    { cod: 2257, nome: "OVO BCO DZ EMB. 12 UN IANA 20 DZ", total: 18, prioridade:"baixa", setor:"BANDEJAS" },
  ];

  let soPrioridade = false;
  let ordemAZ = true;

  function norm(txt){
    return (txt || "")
      .toString()
      .toUpperCase()
      .normalize("NFD")
      .replace(/[\u0300-\u036f]/g,"")
      .replace(/\s+/g," ")
      .trim();
  }

  function toggleSoPrioridade(){
    soPrioridade = !soPrioridade;
    document.getElementById("btnPrioridade").innerText = `â­ SÃ³ prioridade: ${soPrioridade ? "ON" : "OFF"}`;
    render();
  }

  function toggleOrdenacao(){
    ordemAZ = !ordemAZ;
    document.getElementById("btnOrdem").innerText = `ğŸ”¤ Ordem: ${ordemAZ ? "Aâ†’Z" : "Zâ†’A"}`;
    render();
  }

  function badgeClass(p){
    if (p === "alta") return "alta";
    if (p === "media") return "media";
    return "baixa";
  }

  function badgeLabel(p){
    if (p === "alta") return "PRIORIDADE";
    if (p === "media") return "ATENÃ‡ÃƒO";
    return "NORMAL";
  }

  function render(){
    const q = norm(document.getElementById("busca").value);
    const lista = document.getElementById("lista");
    lista.innerHTML = "";

    let items = dados.slice();

    if (q){
      items = items.filter(x => norm(x.nome).includes(q) || String(x.cod).includes(q));
    }

    if (soPrioridade){
      items = items.filter(x => x.prioridade === "alta");
    }

    items.sort((a,b)=>{
      const na = String(a.nome || "");
      const nb = String(b.nome || "");
      const cmp = na.localeCompare(nb, "pt-BR", { sensitivity:"base" });
      return ordemAZ ? cmp : -cmp;
    });

    if (!items.length){
      const vazio = document.createElement("div");
      vazio.className = "card";
      vazio.innerHTML = "Nenhum item encontrado.";
      lista.appendChild(vazio);
      return;
    }

    items.forEach(p=>{
      const bloco = document.createElement("div");
      bloco.className = "produto" + (p.prioridade === "alta" ? " prio" : "");

      bloco.innerHTML = `
        <div class="produto-header">
          <div>
            <div class="produto-titulo">${p.cod} â€” ${p.nome}</div>
            <div class="produto-sub">
              ğŸ“ Setor: <b>${p.setor}</b><br/>
              ğŸ“¦ Total: <b>${p.total}</b>
            </div>
          </div>
          <span class="badge ${badgeClass(p.prioridade)}">${badgeLabel(p.prioridade)}</span>
        </div>
      `;

      lista.appendChild(bloco);
    });
  }

  render();
</script>
</body>
</html>
